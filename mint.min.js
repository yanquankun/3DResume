var THREE=null;var Mint=function(args){this.init=function(three){if(!THREE)THREE=three};this.font_ch_url="fonts/Microsoft YaHei UI_Regular.json";this.font_en_url="fonts/helvetiker_regular.typeface.json";this.isIncludeCh=function(str){var patrn=new RegExp("[\\u4E00-\\u9FFF]+","g");if(!patrn.test(str))return false;else return true}};function getPaintingMesh(materialPainting){var geometry=new THREE.PlaneBufferGeometry(100,100);var mesh=new THREE.Mesh(geometry,materialPainting);return mesh}function mipmap(size,color){var imageCanvas=document.createElement("canvas"),context=imageCanvas.getContext("2d");imageCanvas.width=imageCanvas.height=size;context.fillStyle="#444";context.fillRect(0,0,size,size);context.fillStyle=color;context.fillRect(0,0,size/ 2, size /2);context.fillRect(size/ 2, size /2,size/ 2, size /2);return imageCanvas}Mint.prototype.createText=function(scene,text,text_params,coordinates){var font_url=text_params.font_url||(this.isIncludeCh(text)?this.font_ch_url:this.font_en_url);var loader=new THREE.FontLoader();loader.load(font_url,function(font){text_params.font=font;var materialFront=new THREE.MeshBasicMaterial({color:text_params.materialFront||0xff0000});var materialSide=new THREE.MeshBasicMaterial({color:text_params.materialSide||0x000088});var materialArray=[materialFront,materialSide];var textGeom=new THREE.TextGeometry(text,text_params);var textMaterial=new THREE.MeshFaceMaterial(materialArray);var textMesh=new THREE.Mesh(textGeom,textMaterial);textGeom.computeBoundingBox();textMesh.position.set(coordinates[0],coordinates[1],coordinates[2]);textMesh.rotation.x=text_params.PI||0;scene.add(textMesh)})};Mint.prototype.mipmap=function(size,color){return mipmap(size,color)};Mint.prototype.addPainting=function(url,meshCanvas,scene,geometry,coordinates){new THREE.TextureLoader().load(url,function(texturePainting){scene.add(meshCanvas);var image=texturePainting.image;var materialPainting=new THREE.MeshBasicMaterial({color:0xffffff,map:texturePainting});var zscene=scene;var zmesh=getPaintingMesh(materialPainting);zmesh.scale.x=image.width/200;zmesh.scale.y=image.height/200;zmesh.position.z=(coordinates&&coordinates[2])?coordinates[2]:-300;zmesh.position.y=(coordinates&&coordinates[1])?coordinates[1]:1.1*image.height/4;zscene.add(zmesh);var meshFrame=new THREE.Mesh(geometry,new THREE.MeshBasicMaterial({color:0x000000}));meshFrame.position.z=-10.0;meshFrame.scale.x=1.1*image.width/200;meshFrame.scale.y=1.1*image.height/200;meshFrame.position.y=(coordinates&&coordinates[1])?coordinates[1]:1.1*image.height/4;meshFrame.position.z=(coordinates&&coordinates[2])?coordinates[2]-1:-301;zscene.add(meshFrame);var floorHeight=-1.117*image.height/2;meshCanvas.position.y=floorHeight})};Mint.prototype.constructor=Mint;export{Mint};